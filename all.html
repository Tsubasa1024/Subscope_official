<!DOCTYPE html>
<html lang="ja">
<head>
  /* ======== 共通 固定ヘッダー ======== */
.global-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 200;
  padding: 12px 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  backdrop-filter: blur(20px);
  background: rgba(255,255,255,0.82);
  border-bottom: 1px solid rgba(0,0,0,0.04);
}

/* 中身のレイアウト */
.global-header-inner {
  max-width: 1080px;
  margin: 0 auto;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* ロゴ */
.gh-logo {
  font-size: 1.4rem;
  font-weight: 700;
  letter-spacing: -0.03em;
}

/* 既存の .menu-btn をそのまま使う前提（index.html にあるやつ） */
/* 他ページにない場合は同じCSSをコピペでOK */

/* ナビのオーバーレイ位置だけちょっと調整 */
.nav-overlay {
  position: fixed;
  top: 68px;      /* ヘッダーのちょい下 */
  right: 32px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  padding: 20px;
  border-radius: 24px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.2);
  border: 1px solid rgba(0,0,0,0.05);
  transform: translateY(-10px);
  opacity: 0;
  visibility: hidden;
  transition: all 0.25s cubic-bezier(0.2, 0.8, 0.2, 1);
  z-index: 199;
  min-width: 200px;
}

.nav-overlay.open {
  transform: translateY(0);
  opacity: 1;
  visibility: visible;
}

.nav-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.nav-list li {
  margin-bottom: 8px;
}

.nav-list li:last-child {
  margin-bottom: 0;
}

.nav-link {
  display: block;
  padding: 10px 16px;
  border-radius: 12px;
  font-size: 0.95rem;
  font-weight: 500;
  color: #1D1D1F;
  text-decoration: none;
  transition: background 0.2s, transform 0.15s;
}

.nav-link:hover {
  background: #F5F5F7;
  transform: translateY(-1px);
}

/* ヘッダーぶん下げる余白（各ページで必要） */
body {
  padding-top: 72px;  /* ヘッダーの高さぶん */
}

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SUBSCOPE | すべての記事</title>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f7;
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: antialiased;
    }

    .page {
      max-width: 1080px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .logo {
      font-size: 1.4rem;
      font-weight: bold;
      text-decoration: none;
      color: #000;
    }

    .back-link {
      font-size: 0.9rem;
      color: #666;
      text-decoration: none;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-radius: 12px;
    }
.back-link:hover {
  background: #ffffff;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  transform: translateY(-2px);
}
    h1 {
      font-size: 1.8rem;
      margin-bottom: 10px;
    }

    /* タブ */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tab {
      padding: 8px 16px;
      border-radius: 20px;
      background: #e9e9ee;
      cursor: pointer;
      font-size: 0.9rem;
      user-select: none;
    }
.tab:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.16);
}
    .tab.active {
      background: #000;
      color: #fff;
      font-weight: 600;
    }

    /* Grid */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .card {
      background: white;
      border-radius: 18px;
      overflow: hidden;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      transition: 0.2s;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 40px rgba(0,0,0,0.15);
    }

    .thumb {
      width: 100%;
      height: 170px;
      object-fit: cover;
    }

    .card-body {
      padding: 12px 16px 16px;
    }

    .service {
      font-size: 0.75rem;
      color: #666;
      margin-bottom: 4px;
    }

    .title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .desc {
      font-size: 0.85rem;
      color: #555;
      margin-bottom: 6px;
    }

    .date {
      font-size: 0.75rem;
      color: #777;
    }
  </style>
</head>

<body>
<div class="page">

  <header>
    <a href="index.html" class="logo">SUBSCOPE</a>
    <a href="index.html" class="back-link">← トップへ戻る</a>
  </header>

  <h1>すべての記事</h1>

  <!-- タブ -->
  <div class="tabs" id="tabs"></div>

  <!-- 記事一覧 -->
  <div class="grid" id="grid">読み込み中…</div>

</div>

<script>
  async function init() {
    const res = await fetch("./data/articles.json");
    const articles = await res.json();

    const url = new URLSearchParams(window.location.search);
    const current = url.get("tab") || "すべて";

    const tabsEl = document.getElementById("tabs");
    const gridEl = document.getElementById("grid");

    // ⭐ genre だけをタブにする（← これが重要）
    const genreSet = new Set(["すべて"]);
    articles.forEach(a => {
      if (a.genre) genreSet.add(a.genre);
    });

    const genres = [...genreSet];

    // ⭐ タブを genre だけで表示
    tabsEl.innerHTML = genres
      .map(g => `
        <div 
          class="tab ${g === current ? "active" : ""}" 
          onclick="selectTab('${g}')"
        >
          ${g}
        </div>
      `)
      .join("");

    // ⭐ ジャンル別フィルタ（tags は使わない）
    let filtered = articles;
    if (current !== "すべて") {
      filtered = articles.filter(a => a.genre === current);
    }

    // 新しい順
    filtered.sort((a, b) => new Date(b.date) - new Date(a.date));

    // 記事レンダリング
    gridEl.innerHTML = filtered
      .map(
        a => `
        <div class="card" onclick="openArticle(${a.id})">
          <img class="thumb" src="${a.image}" />
          <div class="card-body">
            <div class="service">${a.service}</div>
            <div class="title">${a.title}</div>
            <div class="desc">${a.description}</div>
            <div class="date">${a.date.replace(/-/g, ".")}</div>
          </div>
        </div>
      `
      )
      .join("");
  }

  function selectTab(tab) {
    window.location.href = "all.html?tab=" + encodeURIComponent(tab);
  }

  function openArticle(id) {
    window.location.href = "article.html?id=" + id;
  }

  init();
</script>


</body>
</html>
